<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Initialize MIES Optimization — mies_init_population • smashy</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Initialize MIES Optimization — mies_init_population"><meta property="og:description" content="Set up an OptimInstance for MIES optimization.
This adds the dob and eol columns to the instance's archive, and makes sure there are at least mu survivors
(i.e. entries with eol set to NA) present. If there are already &amp;gt;= mu prior evaluations present, then the last
mu of these remain alive (the other's eol set to 0); otherwise, up to mu new randomly sampled configurations
are evaluated and added to the archive and have eol set to NA."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">smashy</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0-9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">
    <span class="fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mlr-org/smashy/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/" class="external-link">
    <span class="fa fa-comments"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Initialize MIES Optimization</h1>
    <small class="dont-index">Source: <a href="https://github.com/mlr-org/smashy/blob/HEAD/R/mies_methods.R" class="external-link"><code>R/mies_methods.R</code></a></small>
    <div class="hidden name"><code>mies_init_population.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Set up an <code><a href="https://bbotk.mlr-org.com/reference/OptimInstance.html" class="external-link">OptimInstance</a></code> for MIES optimization.
This adds the <code>dob</code> and <code>eol</code> columns to the instance's archive, and makes sure there are at least <code>mu</code> survivors
(i.e. entries with <code>eol</code> set to <code>NA</code>) present. If there are already <code>&gt;= mu</code> prior evaluations present, then the last
<code>mu</code> of these remain alive (the other's <code>eol</code> set to 0); otherwise, up to <code>mu</code> new randomly sampled configurations
are evaluated and added to the archive and have <code>eol</code> set to <code>NA</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mies_init_population</span><span class="op">(</span></span>
<span>  <span class="va">inst</span>,</span>
<span>  <span class="va">mu</span>,</span>
<span>  initializer <span class="op">=</span> <span class="fu">paradox</span><span class="fu">::</span><span class="va"><a href="https://paradox.mlr-org.com/reference/generate_design_random.html" class="external-link">generate_design_random</a></span>,</span>
<span>  fidelity_schedule <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  budget_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  additional_component_sampler <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>inst</dt>
<dd><p>(<code><a href="https://bbotk.mlr-org.com/reference/OptimInstance.html" class="external-link">OptimInstance</a></code>)<br>
Optimization instance to evaluate.</p></dd>


<dt>mu</dt>
<dd><p>(<code>integer(1)</code>)<br>
Population target size, non-negative integer.</p></dd>


<dt>initializer</dt>
<dd><p>(<code>function</code>)<br>
Function that generates a <code><a href="https://paradox.mlr-org.com/reference/Design.html" class="external-link">Design</a></code> object, with arguments <code>param_set</code> and <code>n</code>, functioning like <code><a href="https://paradox.mlr-org.com/reference/generate_design_random.html" class="external-link">paradox::generate_design_random</a></code>
or <code><a href="https://paradox.mlr-org.com/reference/generate_design_lhs.html" class="external-link">paradox::generate_design_lhs</a></code>. Note that <code><a href="https://paradox.mlr-org.com/reference/generate_design_grid.html" class="external-link">paradox::generate_design_grid</a></code> can not be used and must be wrapped with
a custom function that ensures that only <code>n</code> individuals are produced. The generated design must correspond to the <code>inst</code>'s <code>$search_space</code>; for
components that are not in the objective's search space, the <code>additional_component_sampler</code> is used.</p></dd>


<dt>fidelity_schedule</dt>
<dd><p>(<code>data.frame</code> | <code>NULL</code>)<br><code>data.frame</code> with three columns <code>"generation"</code>, <code>"budget_new"</code>, <code>"budget_survivors"</code>, in that order. <code>"budget_new"</code> and <code>"budget_survivors"</code>
are atomic columns assigned to the <code>budget_id</code> component of <code>offspring</code>; which one is chosen depends on <code>survivor_budget</code>.
<code>"generation"</code> is an integer valued column, indicating the first generation at which a row is valid. At least one row with
<code>generation == 1</code> must be present.<br>
This value may be <code>NULL</code> if no multi-fidelity optimization is performed (the default).<br>
Note that the multifidelity functionality is experimental and the UI may change in the future.</p></dd>


<dt>budget_id</dt>
<dd><p>(<code>character(1)</code> | <code>NULL</code>)<br>
Budget component that is set to the value found in <code>fidelity_schedule</code> when doing multi-fidelity optimization. Should be <code>NULL</code>
when and only when <code>fidelity_schedule</code> is <code>NULL</code>.</p></dd>


<dt>additional_component_sampler</dt>
<dd><p>(<code><a href="https://paradox.mlr-org.com/reference/Sampler.html" class="external-link">Sampler</a></code> | <code>NULL</code>)<br><code><a href="https://paradox.mlr-org.com/reference/Sampler.html" class="external-link">Sampler</a></code> for components of individuals that are not part of <code>inst</code>'s <code>$search_space</code>. These components
are never used for performance evaluation, but they may be useful for self-adaptive <code><a href="OperatorCombination.html">OperatorCombination</a></code>s. See the description
of <code><a href="mies_prime_operators.html">mies_prime_operators()</a></code> on how operators need to be primed to respect additional components.<br>
It is possible that <code>additional_component_sampler</code> is used for <em>more</em> rows than <code>initializer</code>, which happens
when the <code>inst</code>'s <code>$archive</code> contains prior evaluations that are alive, but does not contain columns pertaining to additional columns,
or contains <em>all</em> these columns but there are rows that are <code>NA</code> valued. If only <em>some</em> of the columns are present, or if all these columns
are present but there are rows that are only <code>NA</code> valued for some columns, then an error is thrown.<br>
Default is <code>NULL</code>: no additional components.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></p>
<p></p>
<p><code><a href="https://bbotk.mlr-org.com/reference/OptimInstance.html" class="external-link">OptimInstance</a></code>: the input
instance, modified by-reference.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other mies building blocks: 
<code><a href="mies_evaluate_offspring.html">mies_evaluate_offspring</a>()</code>,
<code><a href="mies_generate_offspring.html">mies_generate_offspring</a>()</code>,
<code><a href="mies_get_fitnesses.html">mies_get_fitnesses</a>()</code>,
<code><a href="mies_select_from_archive.html">mies_select_from_archive</a>()</code>,
<code><a href="mies_step_fidelity.html">mies_step_fidelity</a>()</code>,
<code><a href="mies_survival_comma.html">mies_survival_comma</a>()</code>,
<code><a href="mies_survival_plus.html">mies_survival_plus</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://bbotk.mlr-org.com" class="external-link">"bbotk"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">lgr</span><span class="fu">::</span><span class="fu"><a href="https://s-fleck.github.io/lgr/reference/simple_logging.html" class="external-link">threshold</a></span><span class="op">(</span><span class="st">"warn"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define the objective to optimize</span></span></span>
<span class="r-in"><span><span class="va">objective</span> <span class="op">&lt;-</span> <span class="va"><a href="https://bbotk.mlr-org.com/reference/ObjectiveRFun.html" class="external-link">ObjectiveRFun</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">xs</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">xs</span><span class="op">$</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span> <span class="op">-</span> <span class="va">xs</span><span class="op">$</span><span class="va">y</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="fl">2</span> <span class="op">-</span> <span class="va">xs</span><span class="op">$</span><span class="va">x</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="op">-</span> <span class="op">(</span><span class="fl">2</span> <span class="op">-</span> <span class="va">xs</span><span class="op">$</span><span class="va">y</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Obj <span class="op">=</span> <span class="va">z</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span>,</span></span>
<span class="r-in"><span>  domain <span class="op">=</span> <span class="fu"><a href="https://paradox.mlr-org.com/reference/ps.html" class="external-link">ps</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://paradox.mlr-org.com/reference/Domain.html" class="external-link">p_dbl</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://paradox.mlr-org.com/reference/Domain.html" class="external-link">p_dbl</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  codomain <span class="op">=</span> <span class="fu"><a href="https://paradox.mlr-org.com/reference/ps.html" class="external-link">ps</a></span><span class="op">(</span>Obj <span class="op">=</span> <span class="fu"><a href="https://paradox.mlr-org.com/reference/Domain.html" class="external-link">p_dbl</a></span><span class="op">(</span>tags <span class="op">=</span> <span class="st">"maximize"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get a new OptimInstance</span></span></span>
<span class="r-in"><span><span class="va">oi</span> <span class="op">&lt;-</span> <span class="va"><a href="https://bbotk.mlr-org.com/reference/OptimInstanceSingleCrit.html" class="external-link">OptimInstanceSingleCrit</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">objective</span>,</span></span>
<span class="r-in"><span>  terminator <span class="op">=</span> <span class="fu"><a href="https://bbotk.mlr-org.com/reference/trm.html" class="external-link">trm</a></span><span class="op">(</span><span class="st">"evals"</span>, n_evals <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">mies_init_population</span><span class="op">(</span>inst <span class="op">=</span> <span class="va">oi</span>, mu <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 3 evaluations, archive contains 'dob' and 'eol'</span></span></span>
<span class="r-in"><span><span class="va">oi</span><span class="op">$</span><span class="va">archive</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;Archive&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      x    y dob eol  Obj              timestamp batch_nr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 2.1 0.99   1  NA 0.71 2022-08-10 05:17:44.68        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 0.3 2.31   1  NA 0.11 2022-08-10 05:17:44.68        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 2.6 3.95   1  NA 0.03 2022-08-10 05:17:44.68        1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">###</span></span></span>
<span class="r-in"><span><span class="co"># Advanced demo, making use of additional components and fidelity_schedule</span></span></span>
<span class="r-in"><span><span class="co"># Note that the multifidelity functionality is experimental and the UI may</span></span></span>
<span class="r-in"><span><span class="co"># change in the future.</span></span></span>
<span class="r-in"><span><span class="co">##</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get a new OptimInstance</span></span></span>
<span class="r-in"><span><span class="va">oi</span> <span class="op">&lt;-</span> <span class="va"><a href="https://bbotk.mlr-org.com/reference/OptimInstanceSingleCrit.html" class="external-link">OptimInstanceSingleCrit</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">objective</span>,</span></span>
<span class="r-in"><span>  terminator <span class="op">=</span> <span class="fu"><a href="https://bbotk.mlr-org.com/reference/trm.html" class="external-link">trm</a></span><span class="op">(</span><span class="st">"evals"</span>, n_evals <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">mies_init_population</span><span class="op">(</span>inst <span class="op">=</span> <span class="va">oi</span>, mu <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  fidelity_schedule <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    generation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    budget_new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    budget_survivors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>, budget_id <span class="op">=</span> <span class="st">"y"</span>,</span></span>
<span class="r-in"><span>  additional_component_sampler <span class="op">=</span> <span class="va"><a href="https://paradox.mlr-org.com/reference/Sampler1DRfun.html" class="external-link">Sampler1DRfun</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>    param <span class="op">=</span> <span class="va"><a href="https://paradox.mlr-org.com/reference/ParamDbl.html" class="external-link">ParamDbl</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"additional"</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, rfun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 3 evaluations. We also have 'additional', sampled from rfun (always -1),</span></span></span>
<span class="r-in"><span><span class="co"># which is ignored by the objective. Besides, we have "y", which is 2,</span></span></span>
<span class="r-in"><span><span class="co"># according to the fidelity_schedule: `budget_survivors` of `generation` 1.</span></span></span>
<span class="r-in"><span><span class="va">oi</span><span class="op">$</span><span class="va">archive</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;Archive&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    additional    x y dob eol  Obj              timestamp batch_nr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:         -1 0.28 2   1  NA 0.12 2022-08-10 05:17:44.73        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:         -1 2.66 2   1  NA 1.29 2022-08-10 05:17:44.73        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:         -1 3.61 2   1  NA 0.15 2022-08-10 05:17:44.73        1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Martin Binder.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

